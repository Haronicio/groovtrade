<!-- detailsProduit.html -->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Détails du Produit</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">

    <link rel="stylesheet" href="/css/produits_style.css">

    <script src="/js/produits_script.js"></script>
</head>
<body>
    <div th:include="header :: header" class="container mt-2"></div>
    <div class="container mt-2">
        <h1><span th:text="${produit.meta.nom}"></span></h1>
        <h2>Détails du Produit</h2>
        <form th:action="@{/utilisateur/{username}/ajouterPanier(username=${username})}" method="post">
            <input type="hidden" name="produitId" th:value="${produit.id}" />
            <button type="submit" class="btn btn-primary">Ajouter au Panier</button>
            <input type="number" name="nbProduit" value="1" min="1" th:max="${produit.nbProduit}" />
            <p><b>Nombre disponible :</b><span th:text="${produit.nbProduit}"></span></p>
        </form>
        <div>
            <p><b>Vendeur :</b> <span th:text="${vendeurUsername}"></span></p><!--TODO lien vers le profile-->
            <p><b>Description :</b> <pre th:text="${produit.description}"></pre></p>
            <p><b>Prix :</b> <span th:text="${produit.prix} + ' €' "></span></p>
            <p><b>Type :</b> <span th:text="${produit.type}"></span></p>

            <ul>
                <li><b>Album :</b> <span th:text="${produit.meta.album}"></span></li>
                <li><b>Artiste :</b> <span th:text="${produit.meta.artiste}"></span></li>
                <li><b>Année :</b> <span th:text="${produit.meta.annee}"></span></li>
                <li><b>Genres :</b> <span th:text="${produit.meta.genres}"></span></li>
            </ul>

            <!-- <div th:if="${!produit.imgs.isEmpty()}">
                <img th:src="@{'/images/' + ${produit.imgs.get(0).path}}" alt="Image de couverture"/>
            </div> -->

            <!-- gallerie d'image -->
            <div th:if="${!produit.imgs.isEmpty()}" class="photo-gallery">
                <div class="container">
                    <div th:each="i : ${produit.imgs}" class="row photos" >
                        <div class="col-sm-6 col-md-4 col-lg-3 item"><a th:href="@{'/images/' + ${i.path}}" data-lightbox="photos"><img class="img-fluid" th:src="@{'/images/' + ${i.path}}"></a></div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</body>
</html>
